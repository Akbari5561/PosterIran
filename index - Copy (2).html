<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>Ù¾ÙˆØ³ØªØ± Ø§ÛŒØ±Ø§Ù†</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#2196f3">
  <style>
    body { font-family: sans-serif; direction: rtl; text-align: center; padding: 20px; background: #f2f2f2; }
    img { width: 160px; margin: 10px; border-radius: 10px; box-shadow: 0 0 5px rgba(0,0,0,0.3); }
    .image-box { border: 1px solid #ccc; padding: 10px; margin: 10px; border-radius: 10px; background: white; display: inline-block; width: 240px; vertical-align: top; }
    .image-container { display: flex; flex-wrap: wrap; justify-content: center; }
    #cartSection { display: none; background: #fff; padding: 20px; margin-top: 20px; border-radius: 10px; }
    footer { margin-top: 50px; font-size: 14px; color: #555; }
    #address, #contact { display: none; }
  </style>
</head>
<body>
<h1 onclick="showAdminLogin()">Ù¾ÙˆØ³ØªØ± Ø§ÛŒØ±Ø§Ù†</h1>
<p id="subtitle">Ú†Ø§Ù¾ Ø§Ù†ÙˆØ§Ø¹ Ù¾ÙˆØ³ØªØ±Ù‡Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ</p>
<div id="address">
  <p>ØªÙ‡Ø±Ø§Ù† : Ø®ÛŒØ§Ø¨Ø§Ù† Ù¾Ø§Ù†Ø²Ø¯Ù‡ Ø®Ø±Ø¯Ø§Ø¯</p>
  <p>Ø¨Ø§Ø²Ø§Ø± Ø¢Ù‡Ù†Ú¯Ø±Ø§Ù†</p>
  <p>Ú©ÙˆÚ†Ù‡ Ù…Ø³Ø¬Ø¯ Ø¬Ø§Ù…Ø¹</p>
  <p>Ù¾Ø§Ø³Ø§Ú˜ Ú©Ø§ØºØ° Ùˆ ØªØ­Ø±ÛŒØ±</p>
  <p>Ø²ÛŒØ±Ø²Ù…ÛŒÙ† Ø§ÙˆÙ„ - Ù¾Ù„Ø§Ú© 74</p>
</div>
<div id="contact">
  <p>ØªÙ„ÙÙ†: 02155611875</p>
  <p>Ù…ÙˆØ¨Ø§ÛŒÙ„: 09010195885</p>
</div>
<div id="loginSection">
  <button onclick="enterAsUser()">ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ú¯Ø§Ù„Ø±ÛŒ</button>
  <button onclick="logout()">ğŸ›’</button>
</div>
<div id="adminLogin" style="display: none;">
  <input type="password" id="adminPassword" placeholder="Ø±Ù…Ø² ÙˆØ±ÙˆØ¯ Ø§Ø¯Ù…ÛŒÙ†">
  <button onclick="loginAsAdmin()">ÙˆØ±ÙˆØ¯ Ø§Ø¯Ù…ÛŒÙ†</button>
  <button onclick="logout()">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
</div>
<div id="adminPanel" style="display: none;">
  <h2>Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª</h2>
  <input type="text" id="imageURL" placeholder="Ù„ÛŒÙ†Ú© ØªØµÙˆÛŒØ±">
  <input type="text" id="productName" placeholder="Ù†Ø§Ù… Ù…Ø­ØµÙˆÙ„">
  <input type="number" id="unitPrice" placeholder="Ù‚ÛŒÙ…Øª ÙˆØ§Ø­Ø¯ (Ø±ÛŒØ§Ù„)">
  <select id="groupSelect">
    <option value="1">Ø³Ø§ÛŒØ² Û²Û¹Ã—Û²Û± Ø¯ÙˆØ±ÙˆÚ†Ø§Ù¾</option>
    <option value="2">Ø³Ø§ÛŒØ² ÛµÛ°Ã—Û³Ûµ ÛŒÚ©Ø±ÙˆÚ†Ø§Ù¾</option>
    <option value="3">Ø³Ø§ÛŒØ² ÛµÛ°Ã—Û³Ûµ Ø¯ÙˆØ±ÙˆÚ†Ø§Ù¾</option>
    <option value="4">Ø³Ø§ÛŒØ² Û·Û°Ã—ÛµÛ° ÛŒÚ©Ø±ÙˆÚ†Ø§Ù¾</option>
    <option value="5">Ø³Ø§ÛŒØ² Û·Û°Ã—ÛµÛ° ÛŒÙˆÙˆÛŒâ€ŒØ¯Ø§Ø±</option>
  </select>
  <button onclick="addImage()">Ø§ÙØ²ÙˆØ¯Ù† ØªØµÙˆÛŒØ±</button>
  <button onclick="logout()">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
</div>
<div id="categorySelect" style="display: none;">
  Ú¯Ø±ÙˆÙ‡:
  <select onchange="changeGroup(this.value)">
    <option value="1">Ø³Ø§ÛŒØ² Û²Û¹Ã—Û²Û± Ø¯ÙˆØ±ÙˆÚ†Ø§Ù¾</option>
    <option value="2">Ø³Ø§ÛŒØ² ÛµÛ°Ã—Û³Ûµ ÛŒÚ©Ø±ÙˆÚ†Ø§Ù¾</option>
    <option value="3">Ø³Ø§ÛŒØ² ÛµÛ°Ã—Û³Ûµ Ø¯ÙˆØ±ÙˆÚ†Ø§Ù¾</option>
    <option value="4">Ø³Ø§ÛŒØ² Û·Û°Ã—ÛµÛ° ÛŒÚ©Ø±ÙˆÚ†Ø§Ù¾</option>
    <option value="5">Ø³Ø§ÛŒØ² Û·Û°Ã—ÛµÛ° ÛŒÙˆÙˆÛŒâ€ŒØ¯Ø§Ø±</option>
  </select>
  <button onclick="showCart()">ğŸ›’ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯</button>
  <button onclick="logoutUser()">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
</div>
<div id="gallery" style="display: none;">
  <div class="image-container" id="imagesContainer"></div>
</div>
<div id="cartSection">
  <h3>ğŸ›’ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯</h3>
  <div id="cartList"></div>
  <button onclick="downloadAndSendOrder()">Ø«Ø¨Øª Ø³ÙØ§Ø±Ø´ Ùˆ Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ ÙˆØ§ØªØ³â€ŒØ§Ù¾</button>
  <br><br>
  <button onclick="hideCart()">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
</div>
<script>
let products = JSON.parse(localStorage.getItem("products")) || [];

function showAdminLogin() {
  document.getElementById("adminLogin").style.display = "block";
  document.getElementById("loginSection").style.display = "none";
  document.getElementById("subtitle").style.display = "none";
  document.getElementById("address").style.display = "none";
  document.getElementById("contact").style.display = "none";
}
function enterAsUser() {
  document.getElementById("loginSection").style.display = "none";
  document.getElementById("categorySelect").style.display = "block";
  document.getElementById("gallery").style.display = "block";
  document.getElementById("subtitle").style.display = "none";
  document.getElementById("address").style.display = "none";
  document.getElementById("contact").style.display = "none";
  loadProducts("Ø³Ø§ÛŒØ² Û²Û¹Ã—Û²Û± Ø¯ÙˆØ±ÙˆÚ†Ø§Ù¾");
}
function logoutUser() {
  document.getElementById("categorySelect").style.display = "none";
  document.getElementById("gallery").style.display = "none";
  document.getElementById("loginSection").style.display = "block";
  document.getElementById("subtitle").style.display = "block";
  document.getElementById("address").style.display = "block";
  document.getElementById("contact").style.display = "block";
}
function loginAsAdmin() {
  const password = document.getElementById("adminPassword").value;
  if (password === "Alireza55") {
    document.getElementById("adminLogin").style.display = "none";
    document.getElementById("adminPanel").style.display = "block";
  } else {
    alert("Ø±Ù…Ø² Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª");
  }
}
function logout() {
  document.getElementById("adminPanel").style.display = "none";
  document.getElementById("adminLogin").style.display = "none";
  document.getElementById("loginSection").style.display = "block";
  document.getElementById("subtitle").style.display = "block";
  document.getElementById("address").style.display = "block";
  document.getElementById("contact").style.display = "block";
}
function changeGroup(groupId) {
  const groupName = {
    1: "Ø³Ø§ÛŒØ² Û²Û¹Ã—Û²Û± Ø¯ÙˆØ±ÙˆÚ†Ø§Ù¾",
    2: "Ø³Ø§ÛŒØ² ÛµÛ°Ã—Û³Ûµ ÛŒÚ©Ø±ÙˆÚ†Ø§Ù¾",
    3: "Ø³Ø§ÛŒØ² ÛµÛ°Ã—Û³Ûµ Ø¯ÙˆØ±ÙˆÚ†Ø§Ù¾",
    4: "Ø³Ø§ÛŒØ² Û·Û°Ã—ÛµÛ° ÛŒÚ©Ø±ÙˆÚ†Ø§Ù¾",
    5: "Ø³Ø§ÛŒØ² Û·Û°Ã—ÛµÛ° ÛŒÙˆÙˆÛŒâ€ŒØ¯Ø§Ø±"
  }[groupId];
  loadProducts(groupName);
}
function showCart() {
  document.getElementById("cartSection").style.display = "block";
  document.getElementById("gallery").style.display = "none";
}
function hideCart() {
  document.getElementById("cartSection").style.display = "none";
  document.getElementById("gallery").style.display = "block";
}
function addImage() {
  const imageURL = document.getElementById("imageURL").value;
  const productName = document.getElementById("productName").value;
  const unitPrice = parseInt(document.getElementById("unitPrice").value);
  const group = document.getElementById("groupSelect").selectedOptions[0].text;
  const newProduct = { id: Date.now(), imageURL, productName, unitPrice, group };
  products.push(newProduct);
  localStorage.setItem("products", JSON.stringify(products));
  alert("Ù…Ø­ØµÙˆÙ„ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯.");
  loadProducts(group);
}
function loadProducts(groupName) {
  const container = document.getElementById("imagesContainer");
  container.innerHTML = "";
  products.filter(p => p.group === groupName).forEach(product => {
    const imageBox = document.createElement("div");
    imageBox.className = "image-box";
    const img = document.createElement("img");
    img.src = product.imageURL;
    const nameElem = document.createElement("div");
    nameElem.textContent = product.productName;
    nameElem.style.fontWeight = "bold";
    const priceDisplay = document.createElement("div");
    priceDisplay.textContent = `Ù‚ÛŒÙ…Øª ÙˆØ§Ø­Ø¯: ${product.unitPrice.toLocaleString()} Ø±ÛŒØ§Ù„`;
    const quantitySelect = document.createElement("select");
    [20, 50, 100, 200, 300, 400, 500].forEach(q => {
      const opt = document.createElement("option");
      opt.value = q;
      opt.textContent = q + " Ø¹Ø¯Ø¯";
      quantitySelect.appendChild(opt);
    });
    const addToCartBtn = document.createElement("button");
    addToCartBtn.textContent = "â• Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ø³Ø¨Ø¯";
    addToCartBtn.onclick = () => {
      const qty = parseInt(quantitySelect.value);
      const total = product.unitPrice * qty;
      const cartItem = document.createElement("div");
      cartItem.textContent = `${product.productName} | ${product.group} | ØªØ¹Ø¯Ø§Ø¯: ${qty} | Ø¬Ù…Ø¹: ${total.toLocaleString()} Ø±ÛŒØ§Ù„`;
      document.getElementById("cartList").appendChild(cartItem);
    };
    imageBox.appendChild(img);
    imageBox.appendChild(nameElem);
    imageBox.appendChild(priceDisplay);
    imageBox.appendChild(quantitySelect);
    imageBox.appendChild(addToCartBtn);
    if (document.getElementById("adminPanel").style.display === "block") {
      const editBtn = document.createElement("button");
      editBtn.textContent = "âœï¸ ÙˆÛŒØ±Ø§ÛŒØ´";
      editBtn.onclick = () => {
        const newImageURL = prompt("Ù„ÛŒÙ†Ú© Ø¬Ø¯ÛŒØ¯ ØªØµÙˆÛŒØ±:", product.imageURL);
        const newName = prompt("Ù†Ø§Ù… Ø¬Ø¯ÛŒØ¯ Ù…Ø­ØµÙˆÙ„:", product.productName);
        const newPrice = prompt("Ù‚ÛŒÙ…Øª Ø¬Ø¯ÛŒØ¯:", product.unitPrice);
        if (newImageURL && newName && newPrice) {
          product.imageURL = newImageURL;
          product.productName = newName;
          product.unitPrice = parseInt(newPrice);
          localStorage.setItem("products", JSON.stringify(products));
          loadProducts(groupName);
        }
      };
      const deleteBtn = document.createElement("button");
      deleteBtn.textContent = "ğŸ—‘ï¸ Ø­Ø°Ù";
      deleteBtn.onclick = () => {
        if (confirm("Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ")) {
          products = products.filter(p => p.id !== product.id);
          localStorage.setItem("products", JSON.stringify(products));
          loadProducts(groupName);
        }
      };
      imageBox.appendChild(editBtn);
      imageBox.appendChild(deleteBtn);
    }
    container.appendChild(imageBox);
  });
}
function downloadAndSendOrder() {
  const cartItems = document.getElementById("cartList").textContent.trim();
  const message = encodeURIComponent("ğŸ›’ Ø³ÙØ§Ø±Ø´:\n" + cartItems);
  window.open("https://wa.me/989010195885?text=" + message, "_blank");
}
</script>
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', function () {
      navigator.serviceWorker.register('/service-worker.js')
        .then(reg => console.log("SW registered", reg))
        .catch(err => console.error("SW failed", err));
    });
  }
</script>
</script>
<footer class="mt-auto py-6 text-gray-500 text-sm">
    <p>&copy; 2023 Ù¾ÙˆØ³ØªØ± Ø§ÛŒØ±Ø§Ù†. ØªÙ…Ø§Ù…ÛŒ Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸ Ø§Ø³Øª.</p>
</footer>
</body>
</html>
